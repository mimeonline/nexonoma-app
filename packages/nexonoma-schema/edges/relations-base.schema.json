{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://nexonoma.de/schema/relations.base.schema.json",
  "title": "Nexonoma Base Relation Schema",
  "description": "Basisschema für alle Nexonoma-Relationen. Enthält alle Felder und Metadaten, jedoch keine spezifischen Relationstypen. Wird von Struktur-, Prozess-, Content- und Dependency-Relationen erweitert.",
  "type": "object",
  "required": ["relation", "sourceID", "targetID", "sourceSlug", "targetSlug"],
  "properties": {
    "type": {
      "type": "string",
      "enum": ["STRUCTURE", "PROCESS", "CONTENT", "DEPENDENCY"],
      "enumDescriptions": [
        "STRUCTURE: Strukturelle Beziehungen zwischen Bausteinen.",
        "PROCESS: Prozessbezogene Beziehungen, die Abläufe oder Workflows darstellen.",
        "CONTENT: Inhaltliche Beziehungen, die thematische oder inhaltliche Verknüpfungen abbilden.",
        "DEPENDENCY: Abhängigkeitsbeziehungen, die Abhängigkeiten zwischen Bausteinen verdeutlichen."
      ],
      "description": "Allgemeiner Typ der Relation."
    },
    "targetID": {
      "type": "string",
      "format": "uuid",
      "description": "UUID des Zielknotens der Relation."
    },
    "sourceID": {
      "type": "string",
      "format": "uuid",
      "description": "UUID des Quellknotens der Relation."
    },
    "targetSlug": {
      "type": "string",
      "description": "Name des Zielknotens."
    },
    "sourceSlug": {
      "type": "string",
      "description": "Name des Quellknotens."
    },
    "direction": {
      "type": "string",
      "enum": ["uni", "bi"],
      "description": "Gibt an, ob die Relation einseitig (uni) oder bidirektional (bi) interpretiert wird."
    },
    "version": {
      "type": "string",
      "description": "Versionsnummer."
    },
    "createdAt": {
      "type": "string",
      "format": "date",
      "description": "Erstellungsdatum (YYYY-MM-DD)."
    },
    "updatedAt": {
      "type": "string",
      "format": "date",
      "description": "Datum der letzten Aktualisierung (YYYY-MM-DD)."
    },

    "props_weight": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": ""
    },
    "props_recommendation": {
      "type": "string",
      "enum": ["strong", "default", "weak", "avoid"],
      "enumDescriptions": [
        "strong: Hohe Empfehlung, gilt in den meisten Kontexten als bevorzugt.",
        "default: Standardempfehlung ohne besondere Gewichtung.",
        "weak: Geringe Empfehlung, nur in spezifischen Kontexten relevant.",
        "avoid: Sollte vermieden werden, nur in Ausnahmefällen einsetzen."
      ],
      "description": "Empfehlungsgrad aus Sicht von Nexonoma."
    },
    "props_standard": {
      "type": "string",
      "enum": ["mandatory", "preferred", "allowed", "prohibited"],
      "enumDescriptions": [
        "mandatory: Muss verwendet werden, verbindlich vorgeschrieben.",
        "preferred: Bevorzugt empfohlen, aber nicht zwingend.",
        "allowed: Zulässig, keine besondere Gewichtung.",
        "prohibited: Nicht erlaubt, sollte nicht verwendet werden."
      ],
      "description": "Governance-Status im Sinne von Standards."
    },
    "props_rationale": {
      "type": "string",
      "maxLength": 1000,
      "description": "Kurze Begründung/Warum diese Relation oder Empfehlung gilt."
    },
    "props_context": {
      "type": "string",
      "enum": [
        "regulated",
        "startup",
        "low-latency",
        "enterprise",
        "safety-critical",
        "decision-context"
      ],
      "enumDescriptions": [
        "regulated: Setzt eine regulierte Branche voraus (z. B. Banking, Healthcare).",
        "startup: Gilt im Umfeld schneller Iteration, hoher Unsicherheit und kleiner Teams.",
        "low-latency: Fokus auf extrem kurze Reaktionszeiten und Performance-Anforderungen.",
        "enterprise: Große Unternehmen mit komplexen Strukturen, Governance und vielen Stakeholdern.",
        "safety-critical: Hohe Risiken bei Fehlern; Systeme müssen besonders robust und überprüfbar sein.",
        "decision-context: Diese Relation ist speziell für Entscheidungsfindung, Priorisierung oder Architektur-Abwägung relevant."
      ],
      "description": "Kontext-Tags, die angeben, in welchem organisatorischen, technischen oder strategischen Umfeld diese Relation gilt."
    },
    "props_confidence": {
      "type": "number",
      "minimum": 0,
      "maximum": 1,
      "description": "Vertrauen/Sicherheit der Ableitung im Bereich 0..1."
    },
    "props_severity": {
      "type": "string",
      "enum": ["low", "medium", "high", "critical"],
      "description": "Wie stark oder kritisch diese Beziehung wirkt."
    },

    "context_label": {
      "type": "string",
      "maxLength": 80,
      "description": "UI-Name/Override des Segments in diesem Cluster-Kontext."
    },
    "context_segmentTypeHint": {
      "type": "string",
      "enum": ["phase", "activity", "task", "milestone", "stream", "lane"],
      "description": "Hinweis für die Visualisierung/Anordnung im SDLC/Board (z. B. Phase oder Aktivität)."
    },
    "context_order": {
      "type": "integer",
      "minimum": 0,
      "description": "Optionale Reihenfolge innerhalb des Clusters oder einer Lane."
    },
    "context_laneId": {
      "type": "string",
      "description": "Optionale Lane/Gleis-ID für Swimlanes im Matrix- oder Board-Layout."
    },
    "context_streamId": {
      "type": "string",
      "description": "Optionale Stream-/Track-ID für parallele Arbeitspfade."
    },
    "context_scenarioType": {
      "type": "string",
      "description": "Typ des Szenarios, in dem diese Relation relevant wird.",
      "enum": [
        "diagnosis",
        "decision",
        "discovery",
        "delivery",
        "strategy",
        "runtime"
      ],
      "enumDescriptions": [
        "diagnosis: Wird genutzt, um Ursachen, Bottlenecks oder Probleme zu analysieren.",
        "decision: Relevant für Architektur-, Tool- oder Organisationsentscheidungen.",
        "discovery: Nutzung bei Exploration neuer Technologien, Methoden oder Konzepte.",
        "delivery: Nutzung in operativer Umsetzung oder Delivery-Prozessen.",
        "strategy: Nutzung im organisatorischen oder unternehmerischen Strategiekontext.",
        "runtime: Nutzung zur Bewertung von Live-Systemen, Betrieb, Observability."
      ]
    },

    "context_problemCategory": {
      "type": "string",
      "description": "Übergeordnete Problemklasse, die diese Relation charakterisiert.",
      "enum": [
        "performance",
        "scalability",
        "alignment",
        "architecture",
        "team-dynamics",
        "organizational-friction",
        "process-issues",
        "integration",
        "governance",
        "unknown"
      ],
      "enumDescriptions": [
        "performance: Performance-/Latenzbezogen.",
        "scalability: Skalierbarkeitsbezogen.",
        "alignment: Misalignment zwischen Teams, Zielen oder Rollen.",
        "architecture: Architekturprobleme oder technische Strukturthemen.",
        "team-dynamics: Team-Kommunikation oder Rollenprobleme.",
        "organizational-friction: Bremsende organisatorische Hürden.",
        "process-issues: Workflow- oder Prozessengpässe.",
        "integration: Schnittstellen- oder Integrationsprobleme.",
        "governance: Regel- oder Standardisierungsprobleme.",
        "unknown: Nicht klassifizierter Problemtyp."
      ]
    },

    "context_phaseHint": {
      "type": "string",
      "description": "Hinweis zur Phase im SDLC/Architekturprozess für Visualisierung.",
      "enum": [
        "discovery",
        "analysis",
        "design",
        "implementation",
        "validation",
        "delivery",
        "operations",
        "strategy"
      ],
      "enumDescriptions": [
        "discovery: Frühe Ideen-/Explorationsphase.",
        "analysis: Analysephase für Problem/Domain.",
        "design: Architektur- oder Systemdesign.",
        "implementation: Umsetzung/Coding.",
        "validation: Testing, Reviews, Verifikation.",
        "delivery: Deployment, Übergabe, Release.",
        "operations: Betrieb, Monitoring, SRE.",
        "strategy: Strategische oder organisatorische Entscheidungen."
      ]
    },
    "context_laneHint": {
      "type": "string",
      "description": "UI-Lane-Hinweis für Swimlanes/Boards."
    }
  }
}
